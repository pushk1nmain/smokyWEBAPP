<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, interactive-widget=resizes-content">
    <title>SmokyApp - –í–≤–æ–¥ –≥–æ—Ä–æ–¥–∞</title>
    
    <!-- Telegram Web App Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../../styles/main.css">
    
    <!-- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- Meta —Ç–µ–≥–∏ –¥–ª—è Telegram WebApp -->
    <meta name="theme-color" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
</head>
<body class="light-theme">
    <div class="app-container">
        <!-- –ü–∞—Ä—è—â–∏–µ —Å–º–∞–π–ª–∏–∫–∏ –Ω–∞ —Ñ–æ–Ω–µ -->
        <div class="floating-emojis">
            <span class="emoji emoji-1">üî•</span>
            <span class="emoji emoji-2">üöÄ</span>
            <span class="emoji emoji-3">üö≠</span>
            <span class="emoji emoji-4">üí®</span>
            <span class="emoji emoji-5">üåø</span>
            <span class="emoji emoji-6">üíö</span>
            <span class="emoji emoji-7">ü§ù</span>
            <span class="emoji emoji-8">üìà</span>
            <span class="emoji emoji-9">ü™¥</span>
            <span class="emoji emoji-10">‚è≥</span>
            <span class="emoji emoji-11">üèÜ</span>
        </div>
        

        <main class="name-input-screen">
            

            <div class="character-section">
                <div class="character-container">
                    <!-- Placeholder for house image -->
                    <img src="../../assets/images/house.svg" alt="–î–æ–º–∏–∫" class="meditating-person-image">
                </div>
            </div>

            <div class="content-section">
                <h1 class="screen-title" id="page-title">–ì–¥–µ –í—ã –∂–∏–≤–µ—Ç–µ?</h1>
                
                <!-- –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <script>
                    (function() {
                        const userName = localStorage.getItem('userName');
                        if (userName) {
                            document.getElementById('page-title').textContent = `${userName}, –≥–¥–µ –í—ã –∂–∏–≤–µ—Ç–µ?`;
                        }
                    })();
                </script>
                
                <p class="screen-description">
                    –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –º–Ω–µ –ø–∏—Å–∞—Ç—å –≤–∞–º –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è, –∞ –Ω–µ –ø–æ—Å—Ä–µ–¥–∏ –Ω–æ—á–∏ üò¥
                </p>
                
                <div class="input-section">
                    <div class="input-field-container">
                        <img src="../../assets/icons/User_fill.svg" alt="–ò–∫–æ–Ω–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" class="input-icon">
                        <input type="text" placeholder="–í–∞—à –≥–æ—Ä–æ–¥" class="name-input">
                    </div>
                </div>

                <div class="action-section">
                    <button class="common-button" 
                            id="nextButton"
                            tabindex="0" 
                            aria-label="–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å">
                        <span class="button-text">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</span>
                        <span class="common-arrow-icon"></span>
                    </button>
                </div>
            </div>
        </main>
        
        <!-- –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º –°–º–æ–∫–∏ -->
        <div class="loading-overlay hidden" id="loadingOverlay">
            <div class="loading-character">
                <img src="../../assets/icons/smoky_basic.svg" alt="–°–º–æ–∫–∏">
                <div class="loading-rings">
                    <div class="loading-ring"></div>
                    <div class="loading-ring"></div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞ -->
        <div class="city-confirmation-modal hidden" id="cityConfirmationModal">
            <div class="modal-overlay" id="modalOverlay"></div>
            <div class="modal-content">
                <h2 class="modal-title" id="modalTitle">–ú–æ—Å–∫–≤–∞?</h2>
                <div class="modal-text-container">
                    <p class="modal-text" id="modalText">–ì–æ–≤–æ—Ä—è—Ç, —Ç–∞–º –≤–æ–∑–¥—É—Ö –æ—Å–æ–±–µ–Ω–Ω—ã–π. –ù—É, –µ—Å–ª–∏ –±–µ–∑ —Å–∏–≥–∞—Ä–µ—Ç!</p>
                    <p class="modal-time-text">–î–∞–≤–∞–π—Ç–µ —Å–≤–µ—Ä–∏–º—Å—è:<br>—É –í–∞—Å —Å–µ–π—á–∞—Å <span id="localTimeDisplay">20:46</span>?</p>
                </div>
                <div class="modal-buttons">
                    <button class="modal-button modal-back-button" id="modalBackButton">
                        <span class="back-arrow-icon"></span>
                    </button>
                    <button class="modal-button modal-confirm-button" id="modalConfirmButton">
                        <span class="confirm-icon">‚úì</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—à–∏–±–∫–∏ –≥–æ—Ä–æ–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω -->
        <div class="city-not-found-modal hidden" id="cityNotFoundModal">
            <div class="modal-overlay-blur" id="cityNotFoundOverlay"></div>
            <div class="error-modal-content">
                <h2 class="error-modal-title">–û–π!</h2>
                <div class="error-modal-text-container">
                    <p class="error-modal-text">
                        –ü–æ—Ö–æ–∂–µ, –≤–∞—à –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç –∏–≥—Ä–∞–µ—Ç —Å –Ω–∞–º–∏ –≤ –ø—Ä—è—Ç–∫–∏! üòÑ<br><br>
                        –ï—Å–ª–∏ –∂–∏–≤–µ—Ç–µ –≤ —Ç–∞–∫–æ–º —É—é—Ç–Ω–æ–º –º–µ—Å—Ç–µ—á–∫–µ, —á—Ç–æ –µ–≥–æ –¥–∞–∂–µ –Ω–∞ –∫–∞—Ä—Ç–∞—Ö –Ω–µ —Å—Ä–∞–∑—É –Ω–∞–π–¥–µ—à—å, —Ç–æ —É–∫–∞–∂–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π –≥–æ—Ä–æ–¥-—Å–æ—Å–µ–¥
                    </p>
                </div>
                <div class="error-modal-buttons">
                    <button class="error-modal-button" id="cityNotFoundOkButton">
                        <span class="confirm-icon">‚úì</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script src="../../config.js"></script>
    <script src="../../utils/loading-manager.js"></script>
    <script src="../../utils/error-modal.js"></script>
    <script src="../../utils/api-client.js"></script>
    <script src="../../utils/global-console.js"></script>
    <script src="../../utils/step-router.js"></script>
    <script src="script.js" defer></script>
</body>
</html>