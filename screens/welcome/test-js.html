<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç –¢–µ—Å—Ç JavaScript</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="font-family: Arial; padding: 20px; background: #f0f0f0;">
    <div id="main-info" style="background: red; color: white; padding: 20px; border-radius: 10px; text-align: center;">
        <h1>‚ùå JavaScript –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç</h1>
        <p>–≠—Ç–æ—Ç —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω –µ—Å–ª–∏ JavaScript –≤–∫–ª—é—á–µ–Ω</p>
    </div>
    
    <div id="telegram-info" style="margin-top: 20px; padding: 20px; background: #eee; border-radius: 10px;">
        <h2>Telegram WebApp –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h2>
        <p id="tg-status">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</p>
    </div>
    
    <script>
        // –¢–µ—Å—Ç 1: –û—Å–Ω–æ–≤–Ω–æ–π JavaScript
        document.getElementById('main-info').innerHTML = `
            <h1 style="color: lightgreen;">‚úÖ JavaScript –†–ê–ë–û–¢–ê–ï–¢!</h1>
            <p>URL: ${window.location.href}</p>
            <p>User Agent: ${navigator.userAgent}</p>
        `;
        document.getElementById('main-info').style.background = 'green';
        
        // –¢–µ—Å—Ç 2: Telegram WebApp API
        const tgInfo = document.getElementById('tg-status');
        if (window.Telegram && window.Telegram.WebApp) {
            const tg = window.Telegram.WebApp;
            tg.ready();
            tg.expand();
            
            tgInfo.innerHTML = `
                <strong>‚úÖ Telegram WebApp –¥–æ—Å—Ç—É–ø–µ–Ω:</strong><br>
                ‚Ä¢ –í–µ—Ä—Å–∏—è: ${tg.version || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}<br>
                ‚Ä¢ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${tg.platform || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}<br>
                ‚Ä¢ –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞: ${tg.colorScheme || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}<br>
                ‚Ä¢ –†–∞–∑–≤–µ—Ä–Ω—É—Ç: ${tg.isExpanded ? '–¥–∞' : '–Ω–µ—Ç'}<br>
                ‚Ä¢ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${tg.initDataUnsafe ? '–µ—Å—Ç—å' : '–Ω–µ—Ç'}<br>
                ${tg.initDataUnsafe && tg.initDataUnsafe.user ? 
                  '‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ' + tg.initDataUnsafe.user.first_name : 
                  '‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã'}
            `;
            tgInfo.style.background = 'lightgreen';
        } else {
            tgInfo.innerHTML = `
                <strong>‚ùå Telegram WebApp –ù–ï –¥–æ—Å—Ç—É–ø–µ–Ω</strong><br>
                ‚Ä¢ window.Telegram: ${window.Telegram ? '–µ—Å—Ç—å' : '–Ω–µ—Ç'}<br>
                ‚Ä¢ window.Telegram.WebApp: ${window.Telegram?.WebApp ? '–µ—Å—Ç—å' : '–Ω–µ—Ç'}
            `;
            tgInfo.style.background = 'pink';
        }
        
        // –¢–µ—Å—Ç 3: –ü—Ä–æ–±—É–µ–º —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π API –∑–∞–ø—Ä–æ—Å
        setTimeout(() => {
            const apiDiv = document.createElement('div');
            apiDiv.style.cssText = 'margin-top: 20px; padding: 20px; background: #fff3cd; border-radius: 10px;';
            apiDiv.innerHTML = '<h2>üåê –¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–∞:</h2><p id="api-result">–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å...</p>';
            document.body.appendChild(apiDiv);
            
            const resultElement = document.getElementById('api-result');
            
            fetch('https://api.smokybot.com/api/v1/user/123456789', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'X-API-Key': 'SMOKY-Oz5niTU0yVrHv892BGxotdo2lCK0KtKPp7ypYskFG9CqR2thpSEPgBnxHnkI7WBQ1jYRZLGQ2JJGKLUmV0zYiahamBjtU3DoUmY0Dnp7peZFLwUGMAcgFe0IkT'
                }
            })
            .then(response => {
                resultElement.innerHTML = `
                    ‚úÖ API –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω!<br>
                    Status: ${response.status} ${response.statusText}<br>
                    Headers: ${JSON.stringify(Object.fromEntries(response.headers.entries()), null, 2)}
                `;
                return response.json();
            })
            .then(data => {
                resultElement.innerHTML += `<br>Data: ${JSON.stringify(data, null, 2)}`;
                apiDiv.style.background = 'lightgreen';
            })
            .catch(error => {
                resultElement.innerHTML = `‚ùå API –æ—à–∏–±–∫–∞: ${error.message}`;
                apiDiv.style.background = 'pink';
            });
        }, 1000);
        
        console.log('üî• –ö–û–ù–°–û–õ–¨: JavaScript –∏ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–±–æ—Ç–∞—é—Ç!');
        console.log('üî• –ö–û–ù–°–û–õ–¨: window.Telegram =', window.Telegram);
        console.log('üî• –ö–û–ù–°–û–õ–¨: window.Telegram.WebApp =', window.Telegram?.WebApp);
    </script>
</body>
</html>
